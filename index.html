<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Singapore PSI Table</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    h2 {
      color: #333;
    }

    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 8px;
      text-align: center;
    }

    th {
      background-color: #f2f2f2;
    }

    td {
      background-color: #fafafa;
    }
  </style>
</head>
<body>
  <h2>Singapore PSI table</h2>
  <h4 id="timestring"></h4>
  <table id="PSItable"> 
    <tr>
      <th>Metric</th>
      <th>Central</th>
      <th>West</th>
      <th>East</th>
      <th>North</th>
      <th>Sorth</th>
      <th>National</th>
    </tr>
  </table><script>
async function fetchPSIData() {
  try {
    const response = await fetch('https://api.data.gov.sg/v1/environment/psi');
    const data = await response.json();

    // 时间
    const timestamp = data.items[0].update_timestamp || data.items[0].timestamp;
    document.getElementById("timestring").textContent = `Timestamp: ${timestamp}`;

    const readings = data.items[0].readings;

    // 遍历所有 readings
    for (const metric in readings) {
      const row = document.createElement("tr");

      const cellMetric = document.createElement("td");
      cellMetric.textContent = metric;
      row.appendChild(cellMetric);

      ["central", "west", "east", "north", "south", "national"].forEach(region => {
        const cell = document.createElement("td");
        cell.textContent = readings[metric][region] ?? "-";
        row.appendChild(cell);
      });

      document.getElementById("PSItable").appendChild(row);
    }
  } catch (error) {
    console.error("Error fetching PSI data:", error);
    document.getElementById("timestring").textContent = "Failed to load PSI data.";
  }
}

fetchPSIData();
</script>
  

</body>
</html>
    
